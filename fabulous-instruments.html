<link rel="import" href="bower_components/polymer/polymer-element.html">
<link rel="import" href="bower_components/paper-styles/paper-styles.html">
<link rel="import" href="bower_components/paper-range-slider/paper-range-slider.html">
<link rel="import" href="bower_components/paper-slider/paper-slider.html">
<link rel="import" href="bower_components/paper-card/paper-card.html">
<link rel="import" href="interfaces/fab-map.html">
<link rel="import" href="interfaces/fab-clock.html">
<link rel="import" href="interfaces/fab-led.html">
<link rel="import" href="interfaces/fab-gate-sequencer.html">
<link rel="import" href="interfaces/fab-pitch-sequencer.html">

<dom-module id="fabulous-instruments">
    <template>
        <style>
            :host {
                display: block;
                @apply --paper-font-common-base;
                font-size: 14px;
                margin: 0;
            }
        </style>
        <paper-card>
            <div class="card-content">
                <fab-clock gate="{{clockGate}}"></fab-clock>
                <p>Map clock gate output</p>
                <paper-range-slider pin=""
                                    min="0"
                                    max="1"
                                    value-min="{{clockMinOutput}}"
                                    value-max="{{clockMaxOutput}}"
                                    step="0.001">
                                    </paper-range-slider>
                <fab-map input="[[clockGate]]"
                         output="{{clockGateMapped}}"
                         min-input="0"
                         max-input="1"
                         min-output="[[clockMinOutput]]"
                         max-output="[[clockMaxOutput]]">
                         </fab-map>
                <fab-led value="[[clockGateMapped]]"></fab-led>
            </div>
        </paper-card>

        <paper-card>
            <div class="card-content">
                <fab-gate-sequencer gate="[[clockGateMapped]]" output="{{gateSequencer1Output}}"></fab-gate-sequencer>
                <fab-led value="[[gateSequencer1Output]]"></fab-led>
            </div>
        </paper-card>
        <paper-card>
            <div class="card-content">
                <fab-gate-sequencer gate="[[clockGateMapped]]" output="{{gateSequencer2Output}}"></fab-gate-sequencer>
                <fab-led value="[[gateSequencer2Output]]"></fab-led>
            </div>
        </paper-card>

        <paper-card>
            <div class="card-content">
                <fab-pitch-sequencer gate="[[gateSequencer2Output]]" output="{{pitchSequencer1Output}}"></fab-pitch-sequencer>
                <fab-led value="[[pitchSequencer1Output]]"></fab-led>
                <paper-range-slider pin=""
                                    min="1"
                                    max="127"
                                    value-min="{{pitchSeqMinOut}}"
                                    value-max="{{pitchSeqMaxOut}}"
                                    step="1">
                                    </paper-range-slider>
                <fab-map input="[[pitchSequencer1Output]]"
                         output="{{pitchSequencer1MappedOutput}}"
                         step="1"
                         min-input="0"
                         max-input="1"
                         min-output="[[pitchSeqMinOut]]"
                         max-output="[[pitchSeqMaxOut]]">
                         </fab-map>
            </div>
        </paper-card>
    </template>

    <script>
        /**
         * `fabulous-instruments`
         * Fabulous web instrument
         *
         * @customElement
         * @polymer
         * @demo demo/index.html
         */
         class FabulousInstruments extends Polymer.Element {
             static get is() { return 'fabulous-instruments'; }
             static get properties() {
                 return {
                     testOutput: {
                         type: Number,
                         value: 0
                     },
                 };
             }
             connectedCallback () {
                 super.connectedCallback();
                 console.log('Fabulous instruments started');
             }
         }

        window.customElements.define(FabulousInstruments.is, FabulousInstruments);
    </script>
</dom-module>
